{% extends "base.html" %}
{% block content %}
  <h2>Пользователи (CRUD)</h2>

  <h3>Создать пользователя</h3>
  <form method="POST" action="/user/create">
    <input name="name" placeholder="Имя" required>
    <button type="submit">Создать</button>
  </form>

  <hr>

  {% if users %}
    <table>
      <tr><th>ID</th><th>Имя</th><th>Действия</th></tr>
      {% for u in users %}
      <tr>
        <td>{{ u.id }}</td>
        <td>
          <form method="POST" action="/user/update" style="display:inline;">
            <input type="hidden" name="id" value="{{ u.id }}">
            <input name="name" value="{{ u.name }}" required>
            <button type="submit">Обновить</button>
          </form>
        </td>
        <td>
          <a href="/user?id={{ u.id }}">Подписки</a> |
          <a href="/user/delete?id={{ u.id }}" onclick="return confirm('Удалить {{ u.name }}?');">Удалить</a>
        </td>
      </tr>
      {% endfor %}
    </table>
  {% else %}
    <p>Пользователей пока нет.</p>
  {% endif %}
{% endblock %}
